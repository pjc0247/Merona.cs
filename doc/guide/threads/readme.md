쓰레드들
====

메인 쓰레드
----
프로세스가 실행되면 기본적으로 생성되는 메인 스레드이며 Main() 함수가 호출되는 쓰레드입니다.<br>
Merona는 메인 쓰레드에서 프로그래머에 의해 요청되지 않은 어떠한 작업(패킷 프로세싱, 핸들링, IO, Accept ...)도 수행하지 않으며, Server.Start 메소드를 호출 시 메인 스레드를 블럭 시키지 않고 별도의 쓰레드에서 서버가 동작합니다.
이러한 구조는 Merona 서버 프로그램에서 한개의 프로세스 안에 독립된 여러개의 서버 인스턴스를 가질 수 있도록 해줍니다.

Merona에 의해 관리되는 쓰레드
----
Merona에 의해 관리되는 쓰레드는 아래와 같은 종류가 있으며, 이 쓰레드들은 각각의 서버 인스턴스에 고유합니다.<br>
(새 서버 인스턴스를 생성하면 아래의 쓰레드들이 독립적으로 생성됩니다.)
* __Worker 쓰레드__<br>
  이 쓰레드에서는 프로그래머가 작성한 모든 서버 로직이 수행됩니다. 각각의 로직들은 다음 로직이 지연되는 일이 없도록 논 블러킹 방식으로 수행되어야 합니다.
* __Scheduler 쓰레드__
  Scheduler에 등록한 모든 작업들은 이 쓰레드에서 적절한 시간에 트리거 된 후 Worker 쓰레드로 넘겨져서 처리됩니다.
* __IO 쓰레드__
  이 쓰레드는 IO 쓰기 작업이 일어난 모든 세션에 대해 주기적으로 Send 버퍼를 비우고 실제로 네트워크에 Send 작업을 수행합니다. 패킷의 직렬화 작업도 이 쓰레드에서 수행됩니다.

.Net에 의해 관리되는 스레드
----
Merona에서는 [.Net의 쓰레드풀](https://msdn.microsoft.com/ko-kr/library/0ka9477y(v=VS.110).aspx)을 사용합니다. 위의 Worker/Scheduler/IO 쓰레드에서 수행되는 작업들을 제외한 모든 백그라운드 작업들이 이곳에서 처리됩니다.<br>
쓰레드 풀은 서버 인스턴스마다 새로이 생성되지 않고 프로세스에 공유합니다. (시스템의 하드웨어적 자원은 한정되어 있기 때문에, 예를들어 서버 인스턴스를 3개가 동작할 때, 10*3개의 쓰레드 풀을 가진다고 해서 일반적으로 효율이 올라가지 않기 때문에)
<br>
만약 수동으로 쓰레드 풀의 크기를 조절하고 싶다면 .Net에서 제공되는 쓰레드 풀 [API](https://msdn.microsoft.com/ko-kr/library/system.threading.threadpool.setmaxthreads(v=vs.110).aspx)를 이용하여 프로그래머가 직접 쓰레드 풀을 제어할 수 있습니다.
